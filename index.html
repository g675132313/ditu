<!--
    ğŸš¨ğŸš¨æ¸©é¦¨æç¤ºğŸš¨ğŸš¨
    ä¸‹é¢ä»£ç æ˜¯ç¨‹åºè‡ªåŠ¨ç”Ÿæˆï¼Œå¯èƒ½å­˜åœ¨ä¸ªåˆ«æ— æ³•è¿è¡Œï¼Œå¦‚æœæ— æ³•è¿è¡Œï¼Œè¯·è°ƒæ•´ä¸‹echartsç‰ˆæœ¬ï¼Œæˆ–è€…è‡ªè¡Œæµè§ˆå™¨æŸ¥çœ‹æŠ¥é”™ä¿¡æ¯è¿›è¡Œä¿®å¤ï¼›
    ä¸‹é¢ä»£ç åˆ†ä¸º echartsæ¡†æ¶ä»£ç è¿™ä¸ªä»£ç ä¸»è¦ç”¨äºèƒ½è¿è¡Œèµ·æ¥echartsï¼Œè¿˜æœ‰å°±æ˜¯æ ¸å¿ƒä»£ç ï¼ˆç”¨ğŸš¨ğŸš¨éå¸¸é‡è¦ğŸš¨ğŸš¨è¿›è¡Œæ ‡æ³¨äº†ï¼‰ï¼Œæ ¸å¿ƒä»£ç ä¸»è¦ç”¨äºæ˜¾ç¤ºæ¡ˆä¾‹æ•ˆæœ
    å¦‚æœæœ‰é—®é¢˜è¯·æ‰“å¼€ç¤¾åŒºç½‘ç«™ https://www.makeapie.cn æ·»åŠ å³ä¸Šè§’å¾®ä¿¡ç¾¤/qqç¾¤è¿›è¡Œè¯¢é—®
     
    ğŸš¨ğŸš¨TipsğŸš¨ğŸš¨ï¼š
    ä¸è¦é¡¹ç›®ä¸­ä½¿ç”¨ç¤¾åŒºé“¾æ¥èµ„æºï¼Œå¦‚https://www.makeapie.cn/dep/echarts/map/js/china.jsï¼Œè¯·åŠ¡å¿…ä¸‹è½½æœ¬åœ°åä½¿ç”¨ï¼Œå› ä¸ºç¤¾åŒºåœ°å€ä¼šä¸å®šæœŸæ›´æ¢ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä½ ä»¬é¡¹ç›®å‡ºç°é—®é¢˜ã€‚
-->
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>www.makeApie.cn - EChartsæ¡ˆä¾‹ä¸‹è½½ - åœ°å›¾ä¸‹é’»</title>
    <!--
        ğŸš¨ğŸš¨éå¸¸é‡è¦ğŸš¨ğŸš¨ï¼šè®¾ç½®ç›¸å¯¹è·¯å¾„èµ„æºurlé“¾æ¥
        å¦‚æœä½ éœ€è¦æœ¬åœ°ä½¿ç”¨ï¼Œè¯·ä¸‹è½½ä¸‹æ¥ï¼Œå‡è®¾ä¸‹é¢ä»£ç ä¸­æœ‰ä¸ªç›¸å¯¹è·¯å¾„èµ„æº /dep/echarts/map/js/china.jsï¼ŒğŸ‘‰ğŸ‘‰ä¸‹è½½æ–¹æ³•ï¼šhttps://www.makeapie.cn/dep/echarts/map/js/china.js
    -->
    <base href="https://www.makeapie.cn/">

    <!-- å¼•å…¥åˆšåˆšä¸‹è½½çš„ ECharts æ–‡ä»¶ å’Œ jquery -->
    <script type="text/javascript"
        src="https://registry.npmmirror.com/echarts/4.1.0/files/dist/echarts.min.js"></script>
    <script type="text/javascript" src="https://registry.npmmirror.com/jquery/3.7.1/files/dist/jquery.min.js"></script>
    <style>
        * {
            padding: 0;
            margin: 0;
        }
    </style>

    <!--
        ğŸš¨ğŸš¨éå¸¸é‡è¦ğŸš¨ğŸš¨ï¼šä¸‹é¢æ˜¯è¿è¡Œæ¡ˆä¾‹éœ€è¦çš„ç¬¬ä¸‰æ–¹è„šæœ¬ï¼Œå¦‚æœæ˜¯ç›¸å¯¹é“¾æ¥ï¼Œä¸‹è½½æ–¹æ³•çœ‹ä¸Šé¢ğŸ‘†ğŸ‘†
        å¦‚æœä½ éœ€è¦æœ¬åœ°ä½¿ç”¨ï¼Œè¯·ä¸‹è½½ä¸‹æ¥ï¼Œå‡è®¾ä¸‹é¢ä»£ç ä¸­æœ‰ä¸ªç›¸å¯¹è·¯å¾„èµ„æº /dep/echarts/map/js/china.jsï¼Œä¸‹è½½æ–¹æ³•ï¼šhttps://www.makeapie.cn/dep/echarts/map/js/china.js
    -->
    <!--æš‚æ— ç¬¬ä¸‰æ–¹è„šæœ¬-->

</head>

<body>
    <!-- ä¸º ECharts å‡†å¤‡ä¸€ä¸ªå®šä¹‰äº†å®½é«˜çš„ DOM -->
    <div id="chart-panel"
        style="width: calc(100vw - 200px);height:calc(100vh - 200px); padding: 100px; margin: 0 auto;"></div>
    <script type="text/javascript">
        // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså®ä¾‹
        var myChart = echarts.init(document.getElementById('chart-panel'));
        // æŒ‡å®šå›¾è¡¨çš„é…ç½®é¡¹å’Œæ•°æ®
        var option = {};

        //=============== start ===============//
        /**
         * ğŸš¨ğŸš¨éå¸¸é‡è¦ğŸš¨ğŸš¨
         * ä¸‹é¢æ˜¯ ç½‘ç«™å·¦ä¾§ä»£ç ï¼Œæ ¸å¿ƒä»£ç 
         */
        //  å±±è¥¿çœå…±æœ‰åä¸€ä¸ªåœ°çº§å¸‚ï¼Œè¿™äº›åœ°çº§å¸‚åˆ†åˆ«æ˜¯å¤ªåŸå¸‚î›ªã€å¤§åŒå¸‚î›ªã€æœ”å·å¸‚î›ªã€å¿»å·å¸‚î›ªã€é˜³æ³‰å¸‚î›ªã€å•æ¢å¸‚î›ªã€æ™‹ä¸­å¸‚î›ªã€é•¿æ²»å¸‚î›ªã€æ™‹åŸå¸‚î›ªã€ä¸´æ±¾å¸‚î›ªå’Œè¿åŸå¸‚ã€‚
        var jiangxi = "https://geo.datav.aliyun.com/areas_v3/bound/140000_full.json";
        var datong = "https://geo.datav.aliyun.com/areas_v3/bound/140200_full.json";
        var yuncheng = "https://geo.datav.aliyun.com/areas_v3/bound/140800_full.json";
        var shuozhou = "https://geo.datav.aliyun.com/areas_v3/bound/140600_full.json";
        var xinzhou = "https://geo.datav.aliyun.com/areas_v3/bound/140900_full.json";
        var taiyuan = "https://geo.datav.aliyun.com/areas_v3/bound/140100_full.json";
        var yangquan = "https://geo.datav.aliyun.com/areas_v3/bound/140300_full.json";
        var lvliang = "https://geo.datav.aliyun.com/areas_v3/bound/141100_full.json";
        var jinzhong = "https://geo.datav.aliyun.com/areas_v3/bound/140700_full.json";
        var changzhi = "https://geo.datav.aliyun.com/areas_v3/bound/140400_full.json";
        var linfen = "https://geo.datav.aliyun.com/areas_v3/bound/141000_full.json";
        var jincheng = "https://geo.datav.aliyun.com/areas_v3/bound/140500_full.json";

        echarts.extendsMap = function (id, opt) {
            // å®ä¾‹
            var chart = this.init(document.getElementById(id));

            var curGeoJson = {};
            var cityMap = {
                "å¤§åŒå¸‚": datong,
                "æœ”å·å¸‚": shuozhou,
                "å¿»å·å¸‚": xinzhou,
                "å¤ªåŸå¸‚": taiyuan,
                "é˜³æ³‰å¸‚": yangquan,
                "å•æ¢å¸‚": lvliang,
                "æ™‹ä¸­å¸‚": jinzhong,
                "é•¿æ²»å¸‚": changzhi,
                "ä¸´æ±¾å¸‚": linfen,
                "æ™‹åŸå¸‚": jincheng,
                "è¿åŸå¸‚": yuncheng,

            };
            //             å±±è¥¿çœå„å¸‚ç»çº¬åº¦æŸ¥è¯¢
            // .ä¸­é˜³.åŒ—çº¬37.37.ä¸œç»112.17
            // å¤ªåŸ åŒ—çº¬37.54 ä¸œç»112.33
            // é•¿æ²» åŒ—çº¬36.11 ä¸œç»113.06
            // å¤§åŒ åŒ—çº¬40.06 ä¸œç»113.17
            // é«˜å¹³ åŒ—çº¬35.48 ä¸œç»112.55
            // å¤äº¤ åŒ—çº¬37.54 ä¸œç»112.09
            // æ²³æ´¥ åŒ—çº¬35.35 ä¸œç»110.41
            // ä¾¯é©¬åŒ—çº¬35.37ä¸œç»111.21
            // éœå·åŒ—çº¬36.34 ä¸œç»111.42
            // ä»‹ä¼‘ åŒ—çº¬37.02 ä¸œç»111.55
            // æ™‹åŸ åŒ—çº¬35.30 ä¸œç»112.51
            // ä¸´æ±¾ åŒ—çº¬36.05 ä¸œç»111.31
            // æ½åŸ åŒ—çº¬36.21 ä¸œç»113.14
            // æœ”å· åŒ—çº¬39.19 ä¸œç»112.26
            // å­ä¹‰åŒ—çº¬37.08ä¸œç»111.48
            // å¿»å· åŒ—çº¬38.24 ä¸œç»112.43
            // é˜³æ³‰ åŒ—çº¬37.51 ä¸œç»113.34
            // æ°¸æµåŒ—çº¬34.52 ä¸œç»110.27
            // åŸå¹³ åŒ—çº¬38.43 ä¸œç»112.42
            // æ¦†æ¬¡ åŒ—çº¬37.41 ä¸œç»112.43
            // è¿åŸ åŒ—çº¬35.02 ä¸œç»110.59
            var geoCoordMap = {
                "å¤§åŒå¸‚": [113.17, 40.06],
                "æœ”å·å¸‚": [112.26, 39.19],
                "å¿»å·å¸‚": [112.43, 38.24],
                "å¤ªåŸå¸‚": [112.33, 37.54],
                "é˜³æ³‰å¸‚": [113.34, 37.51],
                "å•æ¢å¸‚": [111.13, 37.52],
                "æ™‹ä¸­å¸‚": [112.75, 37.68],
                "é•¿æ²»å¸‚": [113.06, 36.11],
                "ä¸´æ±¾å¸‚": [111.31, 36.05],
                "æ™‹åŸå¸‚": [112.51, 35.30],
                "è¿åŸå¸‚": [110.59, 35.02],
            };
            var levelColorMap = {
                '1': 'rgba(241, 109, 115, .8)',
                '2': 'rgba(255, 235, 59, .7)',
                '3': 'rgba(147, 235, 248, 1)'
            };
            var points = [{
                name: 'çŸ¿ç‚¹A',
                value: [113.17, 40.07]
            }, {
                name: 'çŸ¿ç‚¹B',
                value: [110.59, 35.04]
            }, {
                name: 'çŸ¿ç‚¹C',
                value: [111.843177, 37.376834]
            }]
            var defaultOpt = {
                mapName: 'china',     // åœ°å›¾å±•ç¤º
                goDown: false,        // æ˜¯å¦ä¸‹é’»
                bgColor: '#0000000',   // ç”»å¸ƒèƒŒæ™¯è‰²
                activeArea: [],       // åŒºåŸŸé«˜äº®,åŒechartsé…ç½®é¡¹
                data: [],
                // ä¸‹é’»å›è°ƒ(ç‚¹å‡»çš„åœ°å›¾åã€å®ä¾‹å¯¹è±¡optionã€å®ä¾‹å¯¹è±¡)
                callback: function (name, option, instance) { }
            };
            if (opt) opt = this.util.extend(defaultOpt, opt);

            // å±‚çº§ç´¢å¼•
            var name = [opt.mapName];
            var idx = 0;
            var pos = {
                leftPlus: 115,
                leftCur: 150,
                left: 198,
                top: 50
            };

            var line = [[0, 0], [8, 11], [0, 22]];
            // style
            var style = {
                font: '18px "Microsoft YaHei", sans-serif',
                textColor: '#eee',
                lineColor: 'rgba(147, 235, 248, .8)'
            };
            var planePath = 'path://M482.304 439.808L423.936 237.056h-153.6v37.376h103.936l48.128 164.864h-0.512l18.432 61.44h516.096V443.904l-474.112-4.096zM358.912 295.936H213.504l-144.896 271.36h-0.512V737.28h64v-5.12c-0.512-69.632 57.344-127.488 129.024-128.512 71.68 1.024 129.536 58.368 129.024 128.512 0 2.048 41.984 3.072 12.8 3.072h262.144c0-2.048 7.168-1.536 7.168-3.072-0.512-69.632 57.344-127.488 129.024-128.512 16.896 0 33.792 3.072 49.152 9.728l73.728 32.256h31.744v-129.024h-537.6L358.912 295.936z m-203.776 240.128L245.76 364.544h59.904l38.912 172.032-189.44-0.512z m645.632 91.136c-57.856 0-104.96 46.592-104.96 104.448s47.104 104.448 104.96 104.448 104.96-46.592 104.96-104.448-47.104-104.448-104.96-104.448z m-540.16 0c-57.856 0-104.96 46.592-104.96 104.448s47.104 104.448 104.96 104.448 104.96-46.592 104.96-104.448-47.104-104.448-104.96-104.448z m687.104-214.528L906.24 306.176l-33.792-23.552-38.912 17.92-45.568-112.64-78.336 33.792-83.968 8.192-43.008 71.168-48.128-17.92-38.912 88.064-6.656 7.68 18.944 33.792h439.808z'
            var handleEvents = {
                /**
                 * i å®ä¾‹å¯¹è±¡
                 * o option
                 * n åœ°å›¾å
                **/
                resetOption: function (i, o, n) {
                    var breadcrumb = this.createBreadcrumb(n);

                    var j = name.indexOf(n);
                    var l = o.graphic.length;
                    if (j < 0) {
                        o.graphic.push(breadcrumb);
                        o.graphic[0].children[0].shape.x2 = 145;
                        o.graphic[0].children[1].shape.x2 = 145;
                        if (o.graphic.length > 2) {
                            for (var x = 0; x < opt.data.length; x++) {
                                if (n === opt.data[x].name + 'å¸‚') {
                                    o.series[0].data = handleEvents.initSeriesData([opt.data[x]]);
                                    break;
                                } else o.series[0].data = [];
                            }
                        };
                        name.push(n);
                        idx++;
                    } else {
                        o.graphic.splice(j + 2, l);
                        if (o.graphic.length <= 2) {
                            o.graphic[0].children[0].shape.x2 = 60;
                            o.graphic[0].children[1].shape.x2 = 60;
                            o.series[0].data = handleEvents.initSeriesData(opt.data);
                        };
                        name.splice(j + 1, l);
                        idx = j;
                        pos.leftCur -= pos.leftPlus * (l - j - 1);
                    };

                    o.geo.map = n;
                    o.geo.zoom = 0.4;
                    i.clear();
                    i.setOption(o);
                    this.zoomAnimation();
                    opt.callback(n, o, i);
                },

                /**
                 * name åœ°å›¾å
                **/
                createBreadcrumb: function (name) {
                    var cityToPinyin = {
                        "å¤§åŒå¸‚": 'datong',
                        "æœ”å·å¸‚": 'shuozhou',
                        "å¿»å·å¸‚": 'xinzhou',
                        "å¤ªåŸå¸‚": 'taiyuan',
                        "é˜³æ³‰å¸‚": 'yangquan',
                        "å•æ¢å¸‚": 'lvliang',
                        "æ™‹ä¸­å¸‚": 'jinzhong',
                        "é•¿æ²»å¸‚": 'changzhi',
                        "ä¸´æ±¾å¸‚": 'linfen',
                        "æ™‹åŸå¸‚": 'jincheng',
                        "è¿åŸå¸‚": 'yuncheng',


                    };
                    var breadcrumb = {
                        type: 'group',
                        id: name,
                        left: pos.leftCur + pos.leftPlus,
                        top: pos.top + 3,
                        children: [{
                            type: 'polyline',
                            left: -90,
                            top: -5,
                            shape: {
                                points: line
                            },
                            style: {
                                stroke: '#fff',
                                key: name
                                // lineWidth: 2,
                            },
                            onclick: function () {
                                var name = this.style.key;
                                handleEvents.resetOption(chart, option, name);
                            }
                        }, {
                            type: 'text',
                            left: -68,
                            top: 'middle',
                            style: {
                                text: name,
                                textAlign: 'center',
                                fill: style.textColor,
                                font: style.font
                            },
                            onclick: function () {
                                var name = this.style.text;
                                handleEvents.resetOption(chart, option, name);
                            }
                        }, {
                            type: 'text',
                            left: -68,
                            top: 10,
                            style: {

                                name: name,
                                text: cityToPinyin[name] ? cityToPinyin[name].toUpperCase() : '',
                                textAlign: 'center',
                                fill: style.textColor,
                                font: '12px "Microsoft YaHei", sans-serif',
                            },
                            onclick: function () {
                                // console.log(this.style);
                                var name = this.style.name;
                                handleEvents.resetOption(chart, option, name);
                            }
                        }]
                    }

                    pos.leftCur += pos.leftPlus;

                    return breadcrumb;
                },

                // è®¾ç½®effectscatter
                initSeriesData: function (data) {
                    var temp = [];
                    for (var i = 0; i < data.length; i++) {
                        var geoCoord = geoCoordMap[data[i].name];
                        if (geoCoord) {
                            temp.push({
                                name: data[i].name,
                                value: geoCoord.concat(data[i].value, data[i].level)
                            });
                        }
                    };
                    return temp;
                },

                zoomAnimation: function () {
                    var count = null;
                    var zoom = function (per) {
                        if (!count) count = per;
                        count = count + per;
                        // console.log(per,count);
                        chart.setOption({
                            geo: {
                                zoom: count
                            }
                        });
                        if (count < 1) window.requestAnimationFrame(function () {
                            zoom(0.2);
                        });
                    };
                    window.requestAnimationFrame(function () {
                        zoom(0.2);
                    });
                }
            };

            var option = {
                backgroundColor: opt.bgColor,
                tooltip: {
                    trigger: 'item',
                    backgroundColor: 'rgba(12, 204, 104, 0.92)',
                    borderColor: '#FFFFCC',
                    showDelay: 0,
                    hideDelay: 0,
                    enterable: true,
                    transitionDuration: 0,
                    extraCssText: 'z-index:100',
                    formatter: function (params, ticket, callback) {
                        //æ ¹æ®ä¸šåŠ¡è‡ªå·±æ‹“å±•è¦æ˜¾ç¤ºçš„å†…å®¹
                        var res = "";
                        var name = params.name;
                        var value = params.value;
                        res = "<span style='color:#fff;'>" + name + "</span><br/>æ•°æ®ï¼š" + value;
                        return res;
                    }
                },
                graphic: [{
                    type: 'group',
                    left: pos.left,
                    top: pos.top - 4,
                    children: [{
                        type: 'line',
                        left: 0,
                        top: -20,
                        shape: {
                            x1: 0,
                            y1: 0,
                            x2: 60,
                            y2: 0
                        },
                        style: {
                            stroke: style.lineColor,
                        }
                    }, {
                        type: 'line',
                        left: 0,
                        top: 20,
                        shape: {
                            x1: 0,
                            y1: 0,
                            x2: 60,
                            y2: 0
                        },
                        style: {
                            stroke: style.lineColor,
                        }
                    }]
                }, {
                    id: name[idx],
                    type: 'group',
                    left: pos.left + 2,
                    top: pos.top,
                    children: [{
                        type: 'polyline',
                        left: 90,
                        top: -12,
                        shape: {
                            points: line
                        },
                        style: {
                            stroke: 'transparent',
                            key: name[0]
                        },
                        onclick: function () {
                            var name = this.style.key;
                            handleEvents.resetOption(chart, option, name);
                        }
                    }, {
                        type: 'text',
                        left: 0,
                        top: 'middle',
                        style: {
                            text: name[0] === 'å±±è¥¿' ? 'å±±è¥¿çœ' : name[0],
                            textAlign: 'center',
                            fill: style.textColor,
                            font: style.font
                        },
                        onclick: function () {
                            handleEvents.resetOption(chart, option, 'å±±è¥¿');
                        }
                    }, {
                        type: 'text',
                        left: 0,
                        top: 10,
                        style: {
                            text: 'SHANXI',
                            textAlign: 'center',
                            fill: style.textColor,
                            font: '12px "Microsoft YaHei", sans-serif',
                        },
                        onclick: function () {
                            handleEvents.resetOption(chart, option, 'å±±è¥¿');
                        }
                    }]
                }],
                geo: {
                    map: opt.mapName,
                    // roam: true,
                    zoom: 1,
                    label: {
                        normal: {
                            show: true,
                            textStyle: {
                                color: '#fff'
                            }
                        },
                        emphasis: {
                            textStyle: {
                                color: '#fff'
                            }
                        }
                    },
                    itemStyle: {
                        normal: {
                            borderColor: 'rgba(147, 235, 248, 1)',
                            borderWidth: 1,
                            areaColor: {
                                type: 'radial',
                                x: 0.5,
                                y: 0.5,
                                r: 0.8,
                                colorStops: [{
                                    offset: 0,
                                    color: 'rgba(147, 235, 248, 0)' // 0% å¤„çš„é¢œè‰²
                                }, {
                                    offset: 1,
                                    color: 'rgba(147, 235, 248, .2)' // 100% å¤„çš„é¢œè‰²
                                }],
                                globalCoord: false // ç¼ºçœä¸º false
                            },
                            shadowColor: 'rgba(128, 217, 248, 1)',
                            // shadowColor: 'rgba(255, 255, 255, 1)',
                            shadowOffsetX: -2,
                            shadowOffsetY: 2,
                            shadowBlur: 10
                        },
                        emphasis: {
                            areaColor: '#389BB7',
                            borderWidth: 0
                        }
                    },
                    regions: opt.activeArea.map(function (item) {
                        if (typeof item !== 'string') {
                            return {
                                name: item.name,
                                itemStyle: {
                                    normal: {
                                        areaColor: item.areaColor || '#389BB7'
                                    }
                                },
                                label: {
                                    normal: {
                                        show: item.showLabel,
                                        textStyle: {
                                            color: '#fff'
                                        }
                                    }
                                }
                            }
                        } else {
                            return {
                                name: item,
                                itemStyle: {
                                    normal: {
                                        borderColor: '#91e6ff',
                                        areaColor: '#389BB7'
                                    }
                                }
                            }
                        }
                    })
                },
                series: [{
                    type: 'effectScatter',
                    coordinateSystem: 'geo',
                    // symbol: 'diamond',
                    showEffectOn: 'render',
                    rippleEffect: {
                        period: 15,
                        scale: 4,
                        brushType: 'fill'
                    },
                    hoverAnimation: true,
                    itemStyle: {
                        normal: {
                            color: function (params) {
                                return levelColorMap[params.value[3]];
                            },
                            shadowBlur: 10,
                            shadowColor: '#333'
                        }
                    },
                    label: {
                        normal: {
                            formatter: '{b}',
                            position: 'right',
                            offset: [15, 0],
                            color: '#1DE9B6',
                            show: true
                        },
                    },
                    data: points
                },
                {
                    type: 'lines',
                    zlevel: 2,
                    effect: {
                        show: true,
                        period: 10, //ç®­å¤´æŒ‡å‘é€Ÿåº¦ï¼Œå€¼è¶Šå°é€Ÿåº¦è¶Šå¿«
                        trailLength: 0, //ç‰¹æ•ˆå°¾è¿¹é•¿åº¦[0,1]å€¼è¶Šå¤§ï¼Œå°¾è¿¹è¶Šé•¿é‡
                        symbol: planePath,
                        symbolSize: 15, //å›¾æ ‡å¤§å°
                    },
                    lineStyle: {
                        normal: {
                            color: '#1DE9B6',
                            width: 0.5, //çº¿æ¡å®½åº¦
                            opacity: 0.5, //å°¾è¿¹çº¿æ¡é€æ˜åº¦
                            curveness: .3 //å°¾è¿¹çº¿æ¡æ›²ç›´åº¦
                        }
                    },
                    data: [{
                        coords: [
                            [113.17, 40.07],
                            [110.59, 35.04]
                        ]
                    }, {
                        coords: [
                            [111.843177, 37.376834],
                            [113.17, 40.07]
                        ]
                    }]
                },]
            };

            chart.setOption(option);
            // æ·»åŠ äº‹ä»¶
            chart.on('click', function (params) {
                var _self = this;
                if (opt.goDown && params.name !== name[idx]) {
                    if (cityMap[params.name]) {
                        var url = cityMap[params.name];
                        $.get(url, function (response) {
                            // console.log(response);
                            curGeoJson = response;
                            echarts.registerMap(params.name, response);
                            handleEvents.resetOption(_self, option, params.name);
                        });
                    }
                }
            });

            chart.setMap = function (mapName) {
                var _self = this;
                if (mapName.indexOf('å¸‚') < 0) mapName = mapName + 'å¸‚';
                var citySource = cityMap[mapName];
                if (citySource) {
                    var url = './map/' + citySource + '.json';
                    $.get(url, function (response) {
                        // console.log(response);
                        curGeoJson = response;
                        echarts.registerMap(mapName, response);
                        handleEvents.resetOption(_self, option, mapName);
                    });
                }
                // handleEvents.resetOption(this, option, mapName);
            };

            return chart;
        };

        $.getJSON(jiangxi, function (geoJson) {
            echarts.registerMap('å±±è¥¿', geoJson);
            var myChart = echarts.extendsMap('chart-panel', {
                bgColor: '#00000000', // ç”»å¸ƒèƒŒæ™¯è‰²
                mapName: 'å±±è¥¿',    // åœ°å›¾å
                goDown: true,       // æ˜¯å¦ä¸‹é’»
                // ä¸‹é’»å›è°ƒ
                callback: function (name, option, instance) {
                    console.log(name, option, instance);
                    // points = [{
                    //     name: 'çŸ¿ç‚¹A',
                    //     value: [113.17, 40.07]
                    // }, {
                    //     name: 'çŸ¿ç‚¹B',
                    //     value: [113.19, 40.04]
                    // }, {
                    //     name: 'çŸ¿ç‚¹C',
                    //     value: [113.18, 40.09]
                    // }]
                    // instance.resize()
                    option.series[0].data = [{
                        name: 'çŸ¿ç‚¹A',
                        value: [113.60, 40.04]
                    }, {
                        name: 'çŸ¿ç‚¹B',
                        value: [113.19, 40.04]
                    }, {
                        name: 'çŸ¿ç‚¹C',
                        value: [113.18, 40.09]
                    }]
                    instance.resize()
                },
                // æ•°æ®å±•ç¤º            	
                data: [{
                    name: 'è¿åŸå¸‚',
                    value: 10,
                    level: 1
                }, {
                    name: 'å¤§åŒå¸‚',
                    value: 12,
                    level: 2
                }]
            });
        })

        //=============== end ===============//

        // ä½¿ç”¨åˆšæŒ‡å®šçš„é…ç½®é¡¹å’Œæ•°æ®æ˜¾ç¤ºå›¾è¡¨ã€‚
        if (option && typeof option === 'object') {
            myChart.setOption(option);
        }
        window.addEventListener('resize', myChart.resize);
    </script>
</body>

</html>
